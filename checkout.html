<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="noindex,nofollow">
<link rel="canonical" href="https://shanol.shop/checkout.html">

<title>Shanol - Checkout</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
.step { display: none; }
.step-active { display: block; }
</style>
</head>
<body class="bg-gray-50 text-gray-800">


<div class="container mx-auto px-4 py-12">
  <h2 class="text-3xl font-bold mb-8 text-center text-indigo-600">Checkout</h2>

  <div class="bg-white p-8 rounded-2xl shadow-lg">

    <!-- Step indicators -->
    <div class="flex justify-between mb-8">
      <div id="step1-indicator" class="px-4 py-2 rounded-full font-semibold text-white bg-indigo-600">1. Address</div>
      <div id="step2-indicator" class="px-4 py-2 rounded-full font-semibold text-gray-400 bg-gray-200">2. Review Cart</div>
      <div id="step3-indicator" class="px-4 py-2 rounded-full font-semibold text-gray-400 bg-gray-200">3. WhatsApp Order</div>
    </div>

    <!-- Step 1: Address -->
    <div id="step1" class="step step-active">
      <form id="billing-form" class="space-y-5">
        <input type="text" id="name" placeholder="Full Name" class="w-full border border-gray-300 px-4 py-3 rounded-lg focus:ring-2 focus:ring-indigo-400">
        <input type="email" id="email" placeholder="Email" class="w-full border border-gray-300 px-4 py-3 rounded-lg focus:ring-2 focus:ring-indigo-400">
        <input type="tel" id="phone" placeholder="Phone Number" class="w-full border border-gray-300 px-4 py-3 rounded-lg focus:ring-2 focus:ring-indigo-400">
        <textarea id="address" placeholder="Full Address" class="w-full border border-gray-300 px-4 py-3 rounded-lg focus:ring-2 focus:ring-indigo-400"></textarea>
        <button type="button" id="toStep2" class="w-full py-3 rounded-xl text-white bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-purple-500 hover:to-indigo-500 font-semibold transition">Next</button>
      </form>
    </div>

    <!-- Step 2: Cart Review -->
    <div id="step2" class="step">
      <div id="cart-summary" class="space-y-4 mb-6"></div>
      <div class="flex justify-between">
        <button type="button" id="backToStep1" class="px-6 py-3 rounded-xl bg-gray-300 text-gray-700 hover:bg-gray-400 transition">Back</button>
        <button type="button" id="toStep3" class="px-6 py-3 rounded-xl text-white bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-purple-500 hover:to-indigo-500 font-semibold transition">Next</button>
      </div>
    </div>

    <!-- Step 3: WhatsApp Order -->
    <div id="step3" class="step">
      <h3 class="text-xl font-bold mb-4">Place Order via WhatsApp</h3>
      <p class="mb-6 text-gray-600">Click below to send your order to us on WhatsApp</p>
      <button id="whatsapp-btn" class="w-full py-3 rounded-xl text-white bg-green-500 hover:bg-green-600 font-semibold transition">Order on WhatsApp</button>
      <button type="button" id="backToStep2" class="mt-4 w-full py-3 rounded-xl bg-gray-300 text-gray-700 hover:bg-gray-400 transition">Back</button>
    </div>

  </div>
</div>

<script>
// ===== Product Data =====
const sliderProducts = [
  { id: 1, name: "Artificial Rose For Home Decore (Pack of 2)", price: 249, sku: "AA-2", image: "https://upload.meeshosupplyassets.com/cataloging/1755369251860/enkbv_512.jpg" },
  { id: 2, name: "Artificial Flower Vase", price: 200, sku: "AA-1", image: "https://upload.meeshosupplyassets.com/cataloging/1755369251860/enkbv_512.jpg" },
  { id: 3, name: "LED Decorative Light", price: 300, sku: "AA-3", image: "https://upload.meeshosupplyassets.com/cataloging/1755369251860/enkbv_512.jpg" },
  { id: 4, name: "Wall Hanging Decor", price: 400, sku: "AA-4", image: "https://upload.meeshosupplyassets.com/cataloging/1755369251860/enkbv_512.jpg" },
  { id: 5, name: "Table Plant", price: 500, sku: "AA-5", image: "https://upload.meeshosupplyassets.com/cataloging/1755369251860/enkbv_512.jpg" },
  { id: 6, name: "Luxury Candle Holder", price: 600, sku: "AA-6", image: "https://upload.meeshosupplyassets.com/cataloging/1755369251860/enkbv_512.jpg" }
];

// ===== Normalize Helper =====
const normalizeProduct = (p) => ({
  id: p.id,
  title: p.name || p.title || "Untitled",
  price: Number(p.price) || 0,
  images: [p.image || "https://via.placeholder.com/60"],
  sku: p.sku || "SKU-" + p.id
});

// ===== Cart =====
let cart = JSON.parse(localStorage.getItem("cart")) || [];

// ===== Step Controls =====
const step1 = document.getElementById("step1");
const step2 = document.getElementById("step2");
const step3 = document.getElementById("step3");
const step1Ind = document.getElementById("step1-indicator");
const step2Ind = document.getElementById("step2-indicator");
const step3Ind = document.getElementById("step3-indicator");

function showStep(n){
  step1.classList.remove("step-active");
  step2.classList.remove("step-active");
  step3.classList.remove("step-active");

  step1Ind.classList.remove("bg-indigo-600","text-white"); step1Ind.classList.add("bg-gray-200","text-gray-400");
  step2Ind.classList.remove("bg-indigo-600","text-white"); step2Ind.classList.add("bg-gray-200","text-gray-400");
  step3Ind.classList.remove("bg-indigo-600","text-white"); step3Ind.classList.add("bg-gray-200","text-gray-400");

  if(n===1){ step1.classList.add("step-active"); step1Ind.classList.add("bg-indigo-600","text-white"); step1Ind.classList.remove("bg-gray-200","text-gray-400"); }
  if(n===2){ step2.classList.add("step-active"); step2Ind.classList.add("bg-indigo-600","text-white"); step2Ind.classList.remove("bg-gray-200","text-gray-400"); renderCartSummary(); }
  if(n===3){ step3.classList.add("step-active"); step3Ind.classList.add("bg-indigo-600","text-white"); step3Ind.classList.remove("bg-gray-200","text-gray-400"); }
}

// ===== Navigation =====
document.getElementById("toStep2").onclick = () => {
  const name = document.getElementById("name").value.trim();
  const email = document.getElementById("email").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const address = document.getElementById("address").value.trim();
  cart = JSON.parse(localStorage.getItem("cart")) || [];

  if(!name || !email || !phone || !address){ alert("Please fill all fields"); return; }
  if(cart.length===0){ alert("Cart is empty!"); return; }
  showStep(2);
};
document.getElementById("backToStep1").onclick = ()=>showStep(1);
document.getElementById("toStep3").onclick = ()=>showStep(3);
document.getElementById("backToStep2").onclick = ()=>showStep(2);

// ===== Cart Summary =====
const cartSummary = document.getElementById("cart-summary");

function renderCartSummary(){
  if(cart.length===0){
    cartSummary.innerHTML="<p class='text-gray-600'>Cart is empty</p>";
    return;
  }
  let total = 0;
  let html = '';

  cart.forEach((item, i) => {
    total += item.price * item.quantity;
    html += `
      <div class="flex justify-between items-center border-b pb-3">
        <div class="flex flex-col">
          <div class="flex items-center gap-4">
            <img src="${item.images[0]}" class="w-16 h-16 object-cover rounded-lg"/>
            <span class="font-medium">${item.title} x ${item.quantity}</span>
          </div>
          <div class="text-sm text-gray-500">SKU: ${item.sku}</div> <!-- ✅ SKU added -->
        </div>
        <span class="font-bold text-green-600">₹${item.price*item.quantity}</span>
      </div>
    `;
  });

  html += `<div class="mt-4 flex justify-between font-bold text-lg">Total <span>₹${total}</span></div>`;
  cartSummary.innerHTML = html;
}


// ===== Add to Cart Function =====
function addToCart(id){
  const rawProduct = sliderProducts.find(p=>p.id===id);
  if(!rawProduct){ alert("Product not found!"); return; }
  const product = normalizeProduct(rawProduct);
  cart.push({
    id: product.id,
    title: product.title,
    price: product.price,
    quantity: 1,
    images: product.images,
    sku: product.sku
  });
  localStorage.setItem("cart", JSON.stringify(cart));
  alert(product.title + " added to cart!");
}

// ===== WhatsApp Order =====
document.getElementById("whatsapp-btn").onclick = function(){
  if(cart.length===0){ alert("Cart empty!"); return; }

  const name = document.getElementById("name").value.trim();
  const email = document.getElementById("email").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const address = document.getElementById("address").value.trim();
  if(!name || !email || !phone || !address){ alert("Fill all details!"); return; }

  let message = `Hello, I want to place an order:\n\nName: ${name}\nPhone: ${phone}\nEmail: ${email}\nAddress: ${address}\n\nOrder Details:\n`;

  let total = 0;
  cart.forEach((item,i)=>{
    total += item.price*item.quantity;
    message += `${i+1}. ${item.title}\n   SKU: ${item.sku}\n   Quantity: ${item.quantity}\n   Price: ₹${item.price*item.quantity}\n`;
});
  message += `\nTotal: ₹${total}`;

  const whatsappNumber = "919354105714"; // Tumhara WhatsApp number
  const url = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
  window.open(url, "_blank");

  localStorage.removeItem("cart");
  alert("Cart cleared after sending WhatsApp order!");
  window.location.href="index.html";
};
</script>
<script>
  // Mobile drawer toggle
  document.addEventListener("click", (e) => {
    const menu = document.getElementById("mobile-menu");
    if (e.target.closest("#menu-btn")) {
      menu.classList.toggle("hidden");
    } else if (!e.target.closest("#mobile-menu")) {
      menu.classList.add("hidden");
    }
  });
</script>

</body>
</html>
